# 🎨 图片批处理工具

一款功能一般、界面原始的桌面端图片批处理软件，支持批量裁剪和拼接。

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![CustomTkinter](https://img.shields.io/badge/CustomTkinter-5.2+-green.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

---

## ⚡ 快速开始

### Windows 用户（推荐）

1. **安装依赖**
   ```bash
   双击运行：install_dependencies.bat
   ```

2. **启动程序**
   ```bash
   双击运行：start.bat
   ```

### 命令行方式

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 运行程序
python image_processor.py
```

---

## ✨ 核心功能

### 🎨 现代化界面
- 基于 CustomTkinter 的深色主题设计
- 直观的三选项卡布局
- 实时预览效果
- 响应式设计

### 📁 文件管理
- 选择文件夹批量导入图片
- 支持添加单个文件
- 全选/反选/移除操作
- 支持格式：JPG, PNG, BMP, TIFF, WebP

### ✂️ 批量裁剪
**双模式裁剪：**
- **模式 A（数值微调）**：输入上/下/左/右像素值精确裁剪
- **模式 B（可视化裁剪）**：在预览区用鼠标拖拽画框，自动计算裁剪参数
- **双向联动**：两种模式实时同步，修改任一方式都会更新另一方

**特点：**
- 实时预览裁剪效果
- 批量应用到所有选中图片
- 自动保存到 `cropped` 文件夹

### 🧩 智能拼接
**三种拼接模式：**
1. **网格布局**：自定义行数和列数，自动排列
2. **水平拼接**：统一高度，水平方向排列
3. **垂直拼接**：统一宽度，垂直方向排列

**高级功能：**
- ⭐ **先预览后导出**：生成低分辨率预览，确认效果后再导出高清图
- 自定义图片间距
- 自定义背景颜色
- 灵活的图片来源选择（原图/裁剪后/选中的）

---

## 📖 使用指南

### 文件管理
1. 点击「选择文件夹」导入图片
2. 或使用「添加图片文件...」添加单个文件
3. 在列表中选择需要处理的图片（鼠标拖选多行）

### 批量裁剪流程
1. 切换到「✂️ 批量裁剪」选项卡
2. 点击「加载预览图片」显示第一张图片
3. **方式一**：直接在预览区用鼠标拖拽画出裁剪框
4. **方式二**：在左侧输入框中填写裁剪像素值
5. 两种方式会自动同步
6. 点击「💾 批量裁剪并保存」应用到所有选中图片
7. 结果保存在 `cropped` 文件夹

### 智能拼接流程
1. 切换到「🧩 智能拼接」选项卡
2. 选择拼接模式（网格/水平/垂直）
3. 设置参数：
   - 网格模式：行数、列数（0表示自动）
   - 间距：图片之间的像素间隔
   - 背景颜色：点击按钮选择
4. 选择图片来源
5. 点击「🔍 生成预览」查看效果
6. 满意后点击「💾 导出高清图片」保存
7. 结果默认保存在 `stitched` 文件夹

---

## 🔧 系统要求

- **Python**：3.8 或更高版本
- **操作系统**：Windows / macOS / Linux
- **依赖包**：
  - Pillow >= 10.0.0（图像处理）
  - customtkinter >= 5.2.0（现代 GUI）
  - darkdetect >= 0.8.0（主题检测）
  - packaging >= 23.0（版本管理）

---

## 📂 项目结构

```
项目根目录/
├── image_processor.py          # 主程序（包含 ImageProcessor 和 ModernImageApp 类）
├── requirements.txt            # 依赖列表
├── start.bat                   # 一键启动脚本（Windows）
├── install_dependencies.bat    # 依赖安装脚本（Windows）
├── README.md                   # 项目说明（本文件）
├── 图片批处理工具.spec          # PyInstaller 配置文件
├── cropped/                    # 裁剪输出目录（运行时自动创建）
└── stitched/                   # 拼接输出目录（运行时自动创建）
```

---

## 🛠️ 技术特性

- UI 与逻辑分离（ImageProcessor 类）
- 模块化代码结构
- Canvas 鼠标事件处理
- 等比缩放算法
- 自动居中对齐
- 完善的错误处理机制

---

## 📝 版本信息

**当前版本：v1.0.0** (2026-01-20)

### 已实现功能
- ✅ 现代化深色主题 UI
- ✅ 三选项卡布局（文件管理、批量裁剪、智能拼接）
- ✅ 双模式裁剪（数值微调 + 可视化画框）
- ✅ 三种拼接模式（网格、水平、垂直）
- ✅ 先预览后导出机制
- ✅ 自定义间距和背景色
- ✅ 批量处理功能

---

## 🔮 未来计划

### 功能增强
- [ ] 拖拽文件导入支持
- [ ] 撤销/重做功能
- [ ] 批量重命名
- [ ] 图片旋转功能
- [ ] 更多输出格式（WebP, AVIF）

### UI 改进
- [ ] 多语言支持（中文/English）
- [ ] 主题切换（暗色/亮色）
- [ ] 快捷键支持
- [ ] 进度条显示

### 性能优化
- [ ] 大图片处理优化
- [ ] 多线程处理
- [ ] 内存使用优化

---

## 📄 许可证

MIT License

---

## 👨‍💻 作者

GitHub Copilot & stultus23 (2026-01-20)

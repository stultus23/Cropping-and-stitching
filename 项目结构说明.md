# 项目结构说明

```
Cropping and stitching/          # 项目根目录（可整体复制到其他电脑）
│
├── image_processor.py           # 主程序文件（核心代码）
│
├── requirements.txt             # Python 依赖包列表
│
├── 使用说明.md                  # 详细使用文档
│
├── readme.md                    # 原始需求文档
│
├── start.bat                    # Windows 一键启动脚本
│
├── install_dependencies.bat     # Windows 依赖安装脚本
│
├── .venv/                       # Python 虚拟环境（自动创建）
│   └── ...
│
├── cropped/                     # 裁剪输出目录（运行后自动创建）
│   └── [裁剪后的图片]
│
└── stitched/                    # 拼接输出目录（运行后自动创建）
    └── [拼接后的图片]
```

## 文件说明

### 核心文件

#### `image_processor.py`
主程序文件，包含：
- `ImageProcessor` 类：图像处理逻辑（裁剪、拼接算法）
- `ModernImageApp` 类：GUI 主应用（基于 CustomTkinter）

**代码结构：**
- UI 与逻辑分离
- 三个选项卡：文件管理、批量裁剪、智能拼接
- Canvas 鼠标事件处理
- 实时预览功能

#### `requirements.txt`
Python 依赖包：
- `Pillow`：图像处理库
- `customtkinter`：现代化 GUI 框架
- `darkdetect`：系统主题检测
- `packaging`：版本管理

### 启动脚本

#### `start.bat`（推荐）
一键启动脚本，会自动：
1. 检查 Python 环境
2. 检查并安装依赖
3. 启动程序

#### `install_dependencies.bat`
仅安装依赖包，适合首次使用或更新依赖时运行

### 文档文件

#### `使用说明.md`
完整的用户手册，包含：
- 功能特性介绍
- 快速开始指南
- 详细使用流程
- 使用技巧
- 系统要求

## 运行方式

### 方式一：使用启动脚本（最简单）
```bash
双击 start.bat
```

### 方式二：命令行运行
```bash
# 1. 安装依赖（首次）
pip install -r requirements.txt

# 2. 运行程序
python image_processor.py
```

### 方式三：使用虚拟环境
```bash
# 1. 创建虚拟环境
python -m venv .venv

# 2. 激活虚拟环境
.venv\Scripts\activate    # Windows
source .venv/bin/activate # macOS/Linux

# 3. 安装依赖
pip install -r requirements.txt

# 4. 运行程序
python image_processor.py
```

## 绿色部署

将整个文件夹复制到其他电脑时：

**需要目标电脑具备：**
- Python 3.8 或更高版本

**首次运行：**
1. 双击 `install_dependencies.bat` 安装依赖
2. 双击 `start.bat` 启动程序

或者：
```bash
pip install -r requirements.txt
python image_processor.py
```

## 技术特点

### 1. 模块化设计
- `ImageProcessor`：纯逻辑类，不依赖 UI
- `ModernImageApp`：UI 类，调用 ImageProcessor

### 2. 现代化 UI
- CustomTkinter 深色主题
- 选项卡式布局
- 实时预览
- 响应式设计

### 3. 智能算法
- 裁剪区域自动计算
- 网格布局自动排列
- 图片等比缩放
- 居中对齐

### 4. 用户体验
- 双模式裁剪（数值 + 可视化）
- 先预览后导出
- 操作可撤销
- 友好的错误提示

## 维护与扩展

### 添加新功能
在 `ImageProcessor` 类中添加新的静态方法：
```python
@staticmethod
def new_feature(image, params):
    # 实现新功能
    return processed_image
```

### 修改 UI
在 `ModernImageApp` 类的相应 `setup_xxx_tab()` 方法中修改布局

### 更新依赖
```bash
pip list --outdated
pip install --upgrade package_name
pip freeze > requirements.txt
```

## 许可与版权

- 本项目由 GitHub Copilot with Claude Sonnet 4.5 协助开发
- 可自由使用、修改和分发
- 建议保留原作者信息

---

**愉快地处理您的图片！** 🎨

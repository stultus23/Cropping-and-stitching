# 现代化图片批处理工具

一款功能强大的桌面端图片批处理软件，支持批量裁剪和智能拼接。

## ✨ 核心特性

### 🎨 现代化界面
- 采用 CustomTkinter 框架，深色主题设计
- 三个选项卡：文件管理 | 批量裁剪 | 智能拼接
- 直观的操作流程，实时预览效果

### 📁 文件管理
- 选择文件夹批量导入图片
- 支持添加单个文件
- 全选/反选/移除操作
- 支持格式：JPG, PNG, BMP, TIFF, WebP

### ✂️ 批量裁剪
**双模式裁剪：**
- **模式 A（数值微调）**：输入上/下/左/右像素值精确裁剪
- **模式 B（可视化裁剪）**：在预览区用鼠标拖拽画框，自动计算裁剪参数
- **双向联动**：两种模式实时同步，修改任一方式都会更新另一方

**功能：**
- 实时预览裁剪效果
- 批量应用到所有选中图片
- 自动保存到 `cropped` 文件夹

### 🧩 智能拼接
**三种拼接模式：**
1. **网格布局**：自定义行数和列数，自动排列
2. **水平拼接**：统一高度，水平方向排列
3. **垂直拼接**：统一宽度，垂直方向排列

**高级功能：**
- ⭐ **先预览后导出**：生成低分辨率预览，确认效果后再导出高清图
- 自定义图片间距
- 自定义背景颜色
- 灵活的图片来源选择（原图/裁剪后/选中的）

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

或手动安装：
```bash
pip install Pillow customtkinter darkdetect packaging
```

### 2. 运行程序

**方法一：直接运行**
```bash
python image_processor.py
```

**方法二：使用启动脚本（Windows）**
```bash
start.bat
```

## 📖 使用指南

### 文件管理
1. 点击「选择文件夹」导入图片
2. 或使用「添加图片文件...」添加单个文件
3. 在列表中选择需要处理的图片（鼠标拖选多行）

### 批量裁剪流程
1. 切换到「✂️ 批量裁剪」选项卡
2. 点击「加载预览图片」显示第一张图片
3. **方式一**：直接在预览区用鼠标拖拽画出裁剪框
4. **方式二**：在左侧输入框中填写裁剪像素值
5. 两种方式会自动同步
6. 点击「💾 批量裁剪并保存」应用到所有选中图片
7. 结果保存在 `cropped` 文件夹

### 智能拼接流程
1. 切换到「🧩 智能拼接」选项卡
2. 选择拼接模式（网格/水平/垂直）
3. 设置参数：
   - 网格模式：行数、列数（0表示自动）
   - 间距：图片之间的像素间隔
   - 背景颜色：点击按钮选择
4. 选择图片来源
5. 点击「🔍 生成预览」查看效果
6. 满意后点击「💾 导出高清图片」保存
7. 结果默认保存在 `stitched` 文件夹

## 📂 输出目录

```
工作文件夹/
├── cropped/       # 裁剪后的图片
└── stitched/      # 拼接后的图片
```

## 💡 使用技巧

1. **裁剪联动**：画框时实时更新数值，修改数值时实时更新框的位置
2. **拼接预览**：强烈建议先生成预览，确认效果满意后再导出，避免浪费时间
3. **网格布局**：行数和列数可以只设置一个，另一个会自动计算
4. **图片来源**：如果先裁剪再拼接，勾选「优先使用 cropped 文件夹」
5. **选择性拼接**：只想拼接部分图片时，在文件管理中选中后勾选「仅拼接列表中选中的图片」

## 🔧 系统要求

- Python 3.8+
- Windows / macOS / Linux
- 支持的图片格式：JPG, JPEG, PNG, BMP, TIFF, WebP

## 📦 绿色便携

整个文件夹可以直接复制到其他电脑使用，只需确保目标电脑已安装：
- Python 3.8+
- requirements.txt 中列出的依赖包

## ⚠️ 注意事项

1. 处理大量高分辨率图片时，预览生成可能需要一些时间
2. 拼接大量图片时，输出图片可能很大，注意磁盘空间
3. 在文件列表中选择多行时，需要用鼠标拖选文本
4. 裁剪和拼接不会修改原图，原图始终保持不变

## 🎯 版本信息

- 版本：1.0.0
- 更新日期：2026-01-20
- 开发工具：GitHub Copilot with Claude Sonnet 4.5

---

**享受现代化的图片处理体验！** 🎉
